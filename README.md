# HOWS: 전세사기 예방 플랫폼

## 프로젝트 개요

HOWS는 실시간 전세가 예측과 등기부 분석을 통해 **전세사기 위험을 사전에 진단**하는 웹 기반 종합 솔루션입니다.

* **전세가 예측**: 크롤링한 원룸/빌라/오피스텔 데이터를 기반으로 지역별 전세가 예측
* **위험도 진단**: 전세가 예측값과 실거래가 오차율로 사기 위험 수준 분석
* **등기부 등본 분석**: 신탁, 압류, 가압류 등 위험 권리 여부 자동 감지 및 위험 점수화
* **PDF 파싱 & GPT 시나리오**: 유저가 업로드한 등기부 PDF 분석 + 사기 유형별 대화형 시뮬레이션 지원

## 주요 기능 요약

| 구분                | 기능 설명                                                               |
| ----------------- | ------------------------------------------------------------------- |
| **데이터 수집**        | Selenium 기반으로 다방 플랫폼에서 광주 지역 전세 매물 수집                               |
| **전처리 및 정제**      | 주소 필터링, 월세/전세 금액 통일, 옵션 점수화, 평수 계산 등 정규화 수행                         |
| **전세가 예측**        | LightGBM, XGBoost, CatBoost, Stacking 등 모델 동시 학습 후 MAPE 기준 최적 모델 선택 |
| **자동 MLOps**      | FastAPI + Docker 환경에서 주기적 데이터 수집, 모델 성능 비교 후 자동 업데이트                |
| **SHAP 해석**       | 예측 결과에 대한 feature 기여도 산출 (건축연차, 면적, 인구수 등)                          |
| **등기부 분석**        | PDF 등기부 텍스트에서 근저당, 가압류, 소유권 이슈 등 자동 판별 후 점수화                        |
| **GPT 시뮬레이션**     | 유형별 사기 시나리오 기반 대화형 전세 사기 대응 훈련 기능 구현                                |
| **PostgreSQL 연동** | 데이터베이스 자동 업데이트 및 risk\_level, SHAP 점수 등 저장 및 조회                     |

## 기술 스택

* **Backend**: FastAPI, PostgreSQL, LangChain(OpenAI), Docker
* **ML**: Scikit-learn, LightGBM, XGBoost, CatBoost, SHAP, StackingRegressor
* **Web Crawling**: Selenium, pandas, re
* **Etc**: PDF parsing (PyMuPDF), dotenv, bcrypt, OAuth, CORS, SessionMiddleware

## 주요 MLOps 구성 흐름

1. **크롤링 및 전처리**: 다방 URL → 상세정보 → 정제 및 수치화 → SHAP 점수 반영
2. **모델 학습 & 평가**: 다양한 모델 학습 후 MAPE → MAE 기준으로 최적 모델 선택
3. **모델 자동 갱신**: 이전 모델과 성능 비교 후 더 우수한 경우만 best 모델로 저장
4. **FastAPI 배포**: `/predict-jeonse`, `/trust-check` 등 엔드포인트 제공
5. **PostgreSQL 연결**: 전세 예측 결과 및 SHAP 점수 DB에 자동 반영

## 예측 모델 구성

* 피처: 방수, 욕실수, 엘리베이터, 층등급, 건축점수, 보증보험점수, 즉시입주여부, 단기임대여부, 방향점수, 로그 전용면적, 로그 연차, 총인구수, 평균연령, 평균 평당 전세가, 평균 평당 토지가격
* 타겟: 전세금 (log scale 사용 후 예측값을 원래 값으로 역변환)
* 평가: MAE, MAPE, R2 기준으로 비교 후 최적 모델 선택 및 저장

## 서비스 구조 요약

```
├── /controller
│   ├── FastAPI 라우팅 및 세션 인증 처리
├── /model
│   ├── MLOps 학습 파이프라인, 예측, SHAP 해석
├── /risk.py
│   ├── 등기부 등본 분석 로직, 위험 점수 계산
├── /pdf_parser.py
│   ├── PyMuPDF 기반 PDF 텍스트 추출
├── /database.py
│   ├── PostgreSQL 삽입/조회/삭제 기능 분리
├── /templates
│   ├── 프론트와 연동되는 데이터 JSON 제공
```

## 핵심 성과

* FastAPI + Docker + PostgreSQL을 통한 전세 예측 API 자동화 구축
* SHAP 기반 feature importance 정량화 및 점수화 후 DB 저장
* 전세 사기 유형에 따른 **대화형 시나리오 생성**으로 실전 대응 학습 제공
* 임대인/계약일/주소 기반 등기부 분석으로 위험도 수치화 및 시각화 가능

---

> 본 프로젝트는 실무 수준의 MLOps까지 완벽히 구현하진 않았지만, 크롤링부터 전세 예측, 위험도 진단, API 자동화까지 전 과정을 직접 설계하며 **데이터 기반 실전형 전세사기 예방 시스템**을 구현했다는 점에서 의미 있는 성과로 평가할 수 있습니다.

---

## 기여자

* 팀장 : 차황현
* 팀원 : 김주석, 남다슬, 이희제

* 이희제 - 기획 초기 사용자 분석부터 모델링 및 MLOps 자동화 구현 담당
  * 전세 사기 관련 커뮤니티·리뷰 크롤링 → TF-IDF 기반 키워드 정량화
  * 핵심 Action을 중심으로 사용자 니즈를 Actor/Action 구조화하고, 중요도/만족도 기반 클러스터링으로 대표 페르소나 도출
  * 4D-CX 프레임워크(심리·물리·문화·시스템 관점)를 활용해 사용자 경험을 구조화하고 서비스 방향 설정
  * Selenium 기반 매물 데이터 수집 및 주소/옵션 점수화 등 전처리 설계
  * 앙상블 모델(LGBM, XGBoost, CatBoost, Stacking) 학습 및 SHAP 해석, 성능 기준(MAPE/MAE) 기반 자동 모델 선택
  * FastAPI 기반 예측 및 등기부 분석 API 설계, Docker + PostgreSQL 기반 MLOps 파이프라인 구축
  * 전 과정 구조를 설계한 유스케이스 다이어그램 및 명세서 작성

---

## 향후 계획

* SHAP 점수를 활용한 사용자 맞춤형 추천 알고리즘 고도화
* 지도 기반 시각화 기능 개선 및 모바일 UI 반영
* 다방 외 플랫폼(Naver 부동산, 직방 등) 멀티 크롤링 시스템 확장
* 매물이 없어도 매물 정보 입력 시 위험도 측정

## 시연 영상

[▶ HOWS 시연 영상 보기](./HOWS_시연영상.mp4)
